# Ref와 DOM

전형적인 React 데이터 흐름에서는, 부모 컴포넌트에서 자식 엘리먼트를 조작하기 위해 props만을 사용합니다. 즉, 자식 엘리먼트를 수정하기 위해 새 prop을 가지고 다시 렌더링을 해줍니다. 하지만 가끔은 전형적인 데이터 흐름 밖에서 자식을 명령형으로 변경해야 할 필요가 있습니다. 여기서 변경될 자식이란 React 컴포넌트의 인스턴스일 수도 있고, DOM 엘리먼트일 수도 있습니다. React는 양쪽 경우 모두를 위한 비상구를 제공합니다.

+ Ref는 render메소드에서 생성된 DOM 노드 혹은 React엘리먼트 객체에 접근할 수 있는 방법을 제공한다.
+ 가끔은 props를 가지고 다시 렌더링을 해주는 것이 아닌, 데이터 흐름 밖에서 자식을 명령형(textcontent, focus method ...)으로 변경해야 할 필요가 있다.
+ 그럴 때 Ref를 사용한다.

## 언제 ref를 사용해야 하나요?

  Ref의 바람직한 사용 사례로 다음과 같은 것을 들 수 있습니다:

- 포커스, 텍스트 선택영역, 혹은 미디어의 재생을 관리할 때(메소드를 호출해야 하기 때문에)
- 명령형 애니메이션을 발동시킬 때
- 서드파티 DOM 라이브러리를 통합할 때(리액트로 만들어지지 않은 다른 라이브러리를 리액트 세계에 붙일 때)

## Ref 생성하기

Ref는 객체이다. 
```js
myRef = React.createRef();

render() {
  return <div ref={this.myRef} />;
}

const node = this.myRef.current;

// current dom객체가 된다(리액트 객체가 아니라)
```

## Ref 사용하기
Ref는 React.createRef()를 통해 생성한 뒤 React 엘리먼트의 ref 어트리뷰트에 붙여줄 수 있습니다. Ref는 대개 컴포넌트의 인스턴스가 만들어질 때 인스턴스의 속성에 저장해주며, 이를 통해 컴포넌트 내부 코드에서 자유롭게 사용될 수 있습니다.

- ref를 다 연결해준다음에 current속성을 통해서 DOM 노드 객체를 가져올 수 있다. 
- class 컴포넌트로 부터 생성되는 인스턴스 그 인스턴스에 접근할 때도 사용할 수 있다. 
- ref의 값은 노드의 유형에 따라 달라집니다:

- HTML 엘리먼트에 ref 어트리뷰트가 사용되면, ref의 current 속성은 DOM 엘리먼트 객체를 가리킵니다.
- 클래스 컴포넌트에 ref 어트리뷰트가 사용되면, ref의 current 속성은 해당 컴포넌트로부터 생성된 인스턴스를 가리킵니다.
- 함수형 컴포넌트(state, lifecycle기능이 없음)는 인스턴스를 가질 수 없기 때문에 ref 어트리뷰트 역시 사용할 수 없습니다. 한 번 화면을 그리고 끝나기 때문에 인스턴스라고 할 게 없다. 

- 실무에서도 거의 dom element에 ref만 사용하게 된다.

# 실습 키워드 
  - 상태 
  - 상태를 바꿔서 내려주기
  - 역할과 책임 
    - 공유해야 하는 state만 상류에 둔다.




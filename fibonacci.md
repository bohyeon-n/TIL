# n번째 Fibonacci 구하기!

서론 
내 옆에서 항상 잔소리를 하는 잔소리쟁이가 있다. 
잔소리쟁이가 피보나치 수열을 구현해보라고 했다.
겨우 산수만 할 줄아는 나는 역시나 피보나치가 뭔지 몰랐다
구글에 피보나치수열이 뭔지 검색해봤다
피보나치 수열의 정의와 n번째 피보나치를 구하려면 어떻게 해야 하는지 생각해보았다.
구하는 방법으로 두 가지를 생각했다.
하나는 재귀함수를 사용하는 방법이고 
다른 하나는 반복문을 사용하는 방법이다.
결론부터 말하자면 이 두가지 방법 중 반복문을 사용하여 피보나치 수열을 구현하는 것이 더 좋은방법이다. 
지금부터 피보나치 수열을 구하는 방법과 왜 재귀함수를 사용하였을 때 좋지 않은지 그 이유가 되는 함수stack까지 알아보자. 

## 1. fibonacci란?
fibonacci 수는 다음과 같이 정의되는 수열입니다. 

## 2. 어떻게 풀어야 할까요 


fibonacci수열은 0 1 1 2 3 5 8 13...

앞에 있는 두 수를 더하여 그 다음의 수를 얻을 수 있습니다. 

첫 번째 수와 두 번째 수는 0과 1로 정해져있습니다. 

그 다음 숫자의 fibonacci는 (n-1번 째 fibonacci)+(n-1번 째 fibonacci)입니다. 

이 식을 함수로 표현하자면 다음과 같습니다. 

```javascript
function fibonacci(num){
  if(num == 1){
    return 0;
  }
  if(num == 2){
    return 1;
  }
  return fibonacci(num-1) + fibonacci(num-2)
}
```

fibonacci(5)는 fibonacci(4) + fibonacci(3) 이 됩니다. 
이 말은 fibonacci 함수 인자에 5를 넣으면 다시 인자가 4 인 fibonacci함수를 부릅니다. 
이것이 바로 재귀함수입니다. 
재귀함수란 자기 자신을 호출하는 함수입니다. 

다시 돌아가서  fibonacci (4) 는 다시 fibonacci(3) +fibonacci(2)를 부릅니다. 

다시 fibonacci(3)은 fibonacci(2)+fibonacci(1)를 부릅니다. 
여기서 fibonacci(2) 와 fibonacci(1)의 값은 1과 0으로 정해져있으므로 더이상 함수를 부르지 않고 값이 나오게 됩니다. 
그러므로 fibonacci(3)은 0+1인 1이 됩니다.

그 다음에 fibonacci(4)를 계산하려고 불렀던 fobonacci(2)를 계산하게 됩니다. 
그럼 fibonacci(4)는 계산이 완료 되어 다시 fibonacci(3)을 계산해야 합니다. 

이 과정을 거쳐야 fibonacci(5)를 구할 수 있습니다. 
 
이 과정을 함수로 표현하자면 다음과 같습니다. 

만약  fibonacci(5)가 아닌 fibonacci(100), fibonacci(1000)이면 어떨까요? 
아마 브라우저가 작동하지 않을것입니다. 

5번 째 피보나치를 구하기 위해서는 함수를 9번 호출하여 작동이 가능합니다. 거의 두 배에 가까운 숫자입니다.  
100번 째 1000번 째가 되면 이보다 더 많이 함수를 불러야 하기 때문에 브라우저가 작동하지 않게 되는 것 입니다.  

여기서 stack의 개념이 필요합니다.
 함수를 호출하면 마치 박스에 책을 넣는 것 처럼 쌓이게 됩니다.
박스에 넣은 책을 꺼내기 위해서는 위에서부터 빼내야 합니다.
이 박스를 함수 프레임이라고 하고 책이 쌓이는 것을 스택이라고 합니다. 
함수는 이처럼 나중에 넣은 것이 먼저나오는 LIFO(last in first out)의 구조입니다.  
n번 째 fibonacci를 계산 할 때에도 계속 쌓이다가 fibonacci(2)와 fibonaci(1)이 나와야만 미리 약속한 값인 0과 1로 꺼낼 수 있습니다. 
그러나 한 번 꺼낸 값은 stack에 저장되는 것이 아닙니다. 
계산이 끝나 return 하게 되면 기존에 선언한 변수는 stack에서 사라지게 됩니다. 
그렇게 때문에 이미 한번 fibonacci(3)의 값을 계산했다고 하더라도 이미 data는 사라지고 없기 때문에 다시 한번 함수를 불러 계산을 해줘야 하는 것 입니다. 

그렇다면 n번째 fibonacci를 구하는 다른 방법은 없을까요? 
반복문을 이용하는 방법입니다. 

반복문을 이용한 함수는 다음과 같습니다. 
```javascript
function fibonacci(num){
  if(num == 1){
    return 0;
  }
  if(num == 2){
    return 1;
  }
  var prepre = 0;
  var pre = 1;
  var fib;
  for(i=2; i<num; i++){
    fib = pre + prepre;
    prepre = pre;
    pre = fib;
    
  }
  return fib;

}

```

## 끝맺음
사실 피보나치 수열을 구현하면서 처음에는 혼자힘으로 하지 못해서 물어보기도 하고 검색도 많이 해봤습니다.

저는 프로그래밍을 배운지 약 한달정도밖에 되지 않습니다. 

아직 반복문을 사용하여 함수를 구현하는것이 어렵더라구요 

지금 이 글을 쓰면서도 헛갈려서 검색했었어요 ^^  

저는 아직 시작하는 단계라서 글이 이상할 수도 있을 것 같아요 

다른 개발자분들이 쓰신 피보나치 수열 구현과 함수 스택에 관한 글이 많으니 참고해주세요~ 

언젠가 개발자라고 당당히 말할 수 있는 날이 오길 기대하면서 
그때까지 즐겁게 코딩해요~ :)



## 참고자료 

[위키백과 피보나치 수](https://ko.wikipedia.org/wiki/%ED%94%BC%EB%B3%B4%EB%82%98%EC%B9%98_%EC%88%98)

[HomoEfficio님의 블로그/재귀, 반복, Tail Recursion](https://homoefficio.github.io/2015/07/27/%EC%9E%AC%EA%B7%80-%EB%B0%98%EB%B3%B5-Tail-Recursion/)